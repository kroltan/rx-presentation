<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="../css/theme/black.css">
    <link rel="stylesheet" href="base.css" />
    <script src="https://unpkg.com/rxjs/bundles/rxjs.umd.min.js"></script>
    <style>
        body {
            display: flex;
            align-items: center;
        }
    </style>
</head>
<body class="reveal">
    <button>Adicionar Ã  lista</button>
    <div id="content"></div>

    <script>
        const {
            BehaviorSubject,
            fromEvent,
            operators: {
                map,
                withLatestFrom,
            }
        } = rxjs;

        const BUTTON = document.querySelector("button");
        const CONTENT = document.getElementById("content");

        /* begin */
        const list$ = new BehaviorSubject([]);
        const number$ = fromEvent(BUTTON, "click")
            .pipe(map(() => Math.round(Math.random() * 10)));

        number$
            .pipe(
                withLatestFrom(list$),
                map(([number, list]) => [...list, number])
            )
            .subscribe(list$);

        list$.subscribe(items => {
            CONTENT.innerText = items.join(", ");
        });
    </script>
</body>
</html>